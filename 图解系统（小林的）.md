### 内核空间、用户空间

  内核空间：这个内存空间只有内核程序可以访问
  
  用户空间：这个内存空间专门给应用程序使用
 
 
### 存储器

```
  1、CPU 中的寄存器（处理速度最快）
  
  2、CPU 缓存：L1/L2/L3 三层
  
  -------------------------以上都在CPU 内部，所以读写速度很快----------------------
  
  3、内存：如果断电会丢失
  
  4、硬盘：永久性存储，读写速度相比内存差好几个数量级
```
  我们从图书馆书架取书，把书放到桌子上，再阅读书，我们大脑就会记忆知识点，然后再经过大脑思考，这一系列过程相当于，数据从硬盘加载到内存，再从内存加载到 CPU 的寄存器和 Cache 中，然后再通过 CPU 进行处理和计算
  
# 虚拟内存

### 如何管理虚拟地址与物理地址之间的关系？

  内存分段、内存分页
  
### 内存分段

  虚拟地址：段号+段内偏移
  
  好处：产生连续内存空间
  
  存在问题：会产生内存碎片，内存交换（把占内存空间很大的程序写到磁盘上，再写回来）可以解决，但是磁盘I/O很慢
  
  
### 内存分页

  分页是把整个虚拟和物理内存空间切成⼀段段固定的大小。这样⼀个连续并且尺寸固定的内存空间，我们叫页（Page）。在 Linux 下，每⼀页的大小为 4KB
  
  --页表：存储在内存中的
  
  当进程访问的虚拟地址在页表中查不到时，系统会产生一个缺页异常，进入系统内核空间分配物理内存、更新进程页表，最后再返回用户空间，恢复进程的运行
  
  存在问题：内存分页机制分配内存的最小单位是一页，即使程序不足一页大小，我们最少只能分配一个页，所以页内会出现内存浪费
  
  如果内存空间不够，操作系统会把其他正在运行的进程中的「最近没被使用」的内存页面给释放掉，也就是暂时写在硬盘上，称为换出（Swap Out）。一旦需要的时候，再加载进来，称为换入（Swap In）。所以，一次性写入磁盘的也只有少数的一个页或者几个页，不会花太多时间，内存交换的效率就相对比较高。
  
  
