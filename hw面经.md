https://www.nowcoder.com/discuss/975612   --汇总


### HTTP 协议格式 和 HTTP Header

①、在应用层

②、请求行、请求头部、请求包体；状态行、响应头部、响应包体

浏览器：发起http请求；服务器：接收http请求




### http怎么保证可靠传输

http是基于TCP/IP协议的

1、校验和（保证接收的正确性）：
  
  发送的数据报的二进制求和取反，如果收到的数据包的校验和有差错，则tcp会丢弃这个报文段并且不会返回确认收到的报文段

2、序列号（保证有序和成功接收）：

  tcp会对每一个包进行编号，接收端对数据包按编号进行排序，把有序数组发给应用层

3、确认应答机制（保证成功接收）：接收方会返回确认接收的报文

4、超时重传

5、三次挥手、四次握手（连接管理）

6、流量控制（控制主机之间的传输速度，防止丢包）

  tcp根据接收端对数据的处理能力，决定发送端的发送速度，如果发送方发送数据的速度过快，导致接收端的缓冲区满，而发送方继续发送，就会造成丢包，继而引起丢包重传等一系列连锁反应。 因此TCP支持根据接收端的处理能力，来决定发送端的发送速度，这个机制叫做流量控制

7、拥塞控制（控制网络中的传输，防止丢包）：

  然而如果网络非常拥堵，此时再发送数据就会加重网络负担，那么发送的数据段很可能超过了最大生存时间也没有到达接收方，就会产生丢包问题






### HTTP 中 GET 和 POST 请求的区别

联系：是http的两种请求方式，底层都是 TCP/IP 协议

区别：
```
①、get请求支持后退、刷新，post请求在进行后退的时候，会重新发送请求

②、get一般是获取数据，一般用于搜索排序、筛选操作，post一般是提交数据，用于修改和写入数据

③、get请求的数据一般会被浏览器主动缓存，post请求不会，所以如果get请求两次都请求相同数据，则第二次的消耗时间会较少

④、get请求只能进行url编码，post请求支持多种编码

⑤、get请求一般是放在 URL 中的，因此安全性较差，长度也受限（是因为URL的长度被浏览器和服务器限制），而post请求安全性较好，长度不受限

⑥、get的效率通常要高一些，因为用get方式请求的时候，浏览器会把http的header和body一起发送出去，成功则返回200，post先发送header，成功则返回100 continue，再发送body，成功返回200

⑦、get请求能发送的数据类型是ascll码，post能发更多

```
get 和 post 本质上是TCP/IP连接，但由于http的标准规定和浏览器/服务器的限制，导致在应用过程中体现出一些不同


-------------------------通常get产生一个TCP数据包，post产生两个数据包--------------------
```
post请求的过程：
（1）浏览器请求tcp连接（第一次握手）
（2）服务器答应进行tcp连接（第二次握手）
（3）浏览器确认，并发送post请求头（第三次握手，这个报文比较小，所以http会在此时进行第一次数据发送）
（4）服务器返回100 Continue响应
（5）浏览器发送数据
（6）服务器返回200 OK响应
get请求的过程：
（1）浏览器请求tcp连接（第一次握手）
（2）服务器答应进行tcp连接（第二次握手）
（3）浏览器确认，并发送get请求头和数据（第三次握手，这个报文比较小，所以http会在此时进行第一次数据发送）
（4）服务器返回200 OK响应
也就是说，目测get的总耗是post的2/3左右，这个口说无凭，网上已经有网友进行过测试。

```

### 三次握手、四次挥手

只有三次握手之后才能够保证两台服务器都完全没有问题，各自具备发报和收报能力，防止出现请求超时导致脏连接

解释：（因为TTL 网络报文的生存时间往往都会超 TCP 请求超时时间，如果两次握手就可以创建连接 ，传输数据并释放连接后，第一个超时的连接请求才到达 B 机器的话，B 机器会以为是 A 创建新连接的请求，然后确认同意创建连接。因为 A 机器的状态不是 SYl_SENT ，所以直接丢弃了 B 的确认数据 ，以致最后只是 B 机器单方面创建连接完毕）

### DNS（域名解析协议）流程

作用：将域名转换为IP地址

TCP/IP中使用的是IP地址和端口号来确定网络上某一台主机上的某一个程序，为什么不用域名来直接进行通信呢？
```
1. 因为IP地址是固定长度的，IPv4是32位，IPv6是128位，而域名是变长的，不便于计算机处理。
2. IP地址对于用户来说不方便记忆，但域名便于用户使用
```
就是IP地址是面向主机的，而域名则是面向用户的

域名服务主要是基于UDP实现的（？）

主机名.次级域名.顶级域名.根域名：www.baidu.com.root

DNS解析域名时就是按照层级结构, 从根域名开始逐级向下分级查询
```
以www.baidu.com这个域名的查询流程举例

    1、首先查找电脑上的DNS缓存列表，如果有记录，那么直接返回对于IP地址，否则进行下一步；

    2、查找电脑上的HOST文件的映射关系，如果有记录，那么返回对于IP地址，否则进行下一步；

    3、查找互联网线路供应商的本地DNS服务器（即中国电信、中国移动或中国联通），本地DNS服务器先查找自己的缓存记录，如果有记录，那么返回对于IP地址，否则本地DNS服务器向根域名服务器发生请求；

    4、根域名服务器收到请求后，查看是.com顶级域名，于是返回.com顶级域名服务器的IP地址给到本地DNS服务器；

    5、本地DNS服务器收到回复后，向.com顶级域名服务器发起请求；

    6、.com顶级域名服务器收到请求后，查看是.baidu.com次级域名，于是返回.baidu.com次级域名服务器的IP地址给到DNS服务器；

    7、本地DNS服务器收到回复后，向.baidu.com次级域名服务器发起请求；

    8、.baidu.com次级域名服务器收到请求后，查看是自己管理的域名，于是查看域名和IP地址映射表，把www.baidu.com的IP地址返回给本地DNS服务器；

    9、本地DNS服务器收到回复后，向电脑回复域名对应IP地址，并把记录写入本地DNS服务器的缓存里；

    10、电脑收到回复后，使用IP地址访问网站，并把记录写入电脑DNS缓存中。


```




### ARP协议

是用来将IP地址转换为MAC地址
